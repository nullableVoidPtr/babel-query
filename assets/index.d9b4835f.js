import{l as O,e as w,K as P,R as V}from"./monaco.aebca184.js";import{l as z,a as I,p as A}from"./babel.ffbfc51f.js";import{n as v}from"./vendor.1c8a94fe.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();function f(e){return e[0]}const j=e=>e.replace(/\\(.)/g,(s,r)=>{switch(r){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";default:return r}}),D={Lexer:void 0,ParserRules:[{name:"start",symbols:["_","selectors","_"],postprocess:e=>e[1]},{name:"start",symbols:["_"]},{name:"selectors$ebnf$1",symbols:[]},{name:"selectors$ebnf$1$subexpression$1",symbols:["_",{literal:","},"_","selector"]},{name:"selectors$ebnf$1",symbols:["selectors$ebnf$1","selectors$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"selectors",symbols:["selector","selectors$ebnf$1"],postprocess:e=>e[1].length===0?e[0]:{type:"list",list:[e[0],...e[1].map(s=>s[3])]}},{name:"relativeCombinator",symbols:["_",{literal:"~"},"_"],postprocess:()=>"sibling"},{name:"relativeCombinator",symbols:["_",{literal:"+"},"_"],postprocess:()=>"adjacent"},{name:"relativeCombinator",symbols:["_",{literal:">"},"_"],postprocess:()=>"child"},{name:"combinator",symbols:["relativeCombinator"],postprocess:f},{name:"combinator",symbols:[{literal:" "},"_"],postprocess:()=>"descendant"},{name:"selector",symbols:["sequence"],postprocess:e=>e[0]},{name:"selector",symbols:["selector","combinator","sequence"],postprocess:([e,s,r],t,n)=>e===null||r===null?n:{type:"complex",combinator:s,left:e,right:r}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:e=>e[0].concat([e[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:e=>null},{name:"sequence$ebnf$1",symbols:["startAtom"],postprocess:f},{name:"sequence$ebnf$1",symbols:[],postprocess:()=>null},{name:"sequence$ebnf$2",symbols:[]},{name:"sequence$ebnf$2",symbols:["sequence$ebnf$2","specifierAtom"],postprocess:e=>e[0].concat([e[1]])},{name:"sequence",symbols:["sequence$ebnf$1","sequence$ebnf$2"],postprocess:([e,s],r,t)=>{if(e===null&&s.length===0)return t;let n;return s.length===1&&e===null?n=s[0]:s.length>0?n={type:"compound",list:e===null?s:[e,...s]}:n=e,n}},{name:"field$subexpression$1",symbols:["number"]},{name:"field$subexpression$1",symbols:["identifier"]},{name:"field",symbols:[{literal:"."},"field$subexpression$1"],postprocess:e=>e[1][0]},{name:"sequence$ebnf$3",symbols:["sequence"],postprocess:f},{name:"sequence$ebnf$3",symbols:[],postprocess:()=>null},{name:"sequence$ebnf$4",symbols:[]},{name:"sequence$ebnf$4",symbols:["sequence$ebnf$4","specifierAtom"],postprocess:e=>e[0].concat([e[1]])},{name:"sequence",symbols:["sequence$ebnf$3","field","sequence$ebnf$4"],postprocess:([e,s,r])=>{let t=null;r.length===1?t=r[0]:r.length>1&&(t={type:"compound",list:r});let n;return(e==null?void 0:e.type)==="ancestry"?n=structuredClone(e):n={type:"ancestry",subject:e,path:[]},n.path.push({key:s,specifier:t}),n}},{name:"startAtom",symbols:["wildcard"],postprocess:f},{name:"startAtom",symbols:["identifier"],postprocess:e=>({type:"type",name:e[0]})},{name:"specifierAtom$subexpression$1",symbols:["attr"]},{name:"specifierAtom$subexpression$1",symbols:["pseudoSelector"]},{name:"specifierAtom",symbols:["specifierAtom$subexpression$1"],postprocess:e=>e[0][0]},{name:"wildcard",symbols:[{literal:"*"}],postprocess:()=>({type:"wildcard"})},{name:"identifier$ebnf$1",symbols:[]},{name:"identifier$ebnf$1",symbols:["identifier$ebnf$1",/[_a-zA-Z0-9-]/],postprocess:e=>e[0].concat([e[1]])},{name:"identifier",symbols:[/[_a-zA-Z]/,"identifier$ebnf$1"],postprocess:e=>e[0]+e[1].join("")},{name:"float$ebnf$1",symbols:[/[\+-]/],postprocess:f},{name:"float$ebnf$1",symbols:[],postprocess:()=>null},{name:"float$ebnf$2",symbols:[/[0-9]/]},{name:"float$ebnf$2",symbols:["float$ebnf$2",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"float$ebnf$3",symbols:[]},{name:"float$ebnf$3",symbols:["float$ebnf$3",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"float",symbols:["float$ebnf$1","float$ebnf$2",{literal:"."},"float$ebnf$3"],postprocess:e=>parseFloat((e[0]==="-"?"-":"")+e[1].join("")+"."+e[3].join(""))},{name:"integer$ebnf$1",symbols:[/[\+-]/],postprocess:f},{name:"integer$ebnf$1",symbols:[],postprocess:()=>null},{name:"integer$ebnf$2",symbols:[/[0-9]/]},{name:"integer$ebnf$2",symbols:["integer$ebnf$2",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"integer",symbols:["integer$ebnf$1","integer$ebnf$2"],postprocess:e=>parseInt((e[0]==="-"?"-":"")+e[1].join(""))},{name:"number",symbols:["float"]},{name:"number",symbols:["integer"],postprocess:f},{name:"attr",symbols:[{literal:"["},"_","attrValue","_",{literal:"]"}],postprocess:e=>e[2]},{name:"attrEqOps$ebnf$1",symbols:[{literal:"!"}],postprocess:f},{name:"attrEqOps$ebnf$1",symbols:[],postprocess:()=>null},{name:"attrEqOps",symbols:["attrEqOps$ebnf$1",{literal:"="}],postprocess:e=>(e[0]!==null?"!":"")+e[1]},{name:"attrNumOps",symbols:["attrEqOps"],postprocess:f},{name:"attrNumOps",symbols:[/[><]/],postprocess:f},{name:"attrNumOps$subexpression$1$string$1",symbols:[{literal:">"},{literal:"="}],postprocess:e=>e.join("")},{name:"attrNumOps$subexpression$1",symbols:["attrNumOps$subexpression$1$string$1"]},{name:"attrNumOps$subexpression$1$string$2",symbols:[{literal:"<"},{literal:"="}],postprocess:e=>e.join("")},{name:"attrNumOps$subexpression$1",symbols:["attrNumOps$subexpression$1$string$2"]},{name:"attrNumOps",symbols:["attrNumOps$subexpression$1"],postprocess:e=>e[0].join("")},{name:"attrStrOps$subexpression$1$string$1",symbols:[{literal:"^"},{literal:"="}],postprocess:e=>e.join("")},{name:"attrStrOps$subexpression$1",symbols:["attrStrOps$subexpression$1$string$1"]},{name:"attrStrOps$subexpression$1$string$2",symbols:[{literal:"$"},{literal:"="}],postprocess:e=>e.join("")},{name:"attrStrOps$subexpression$1",symbols:["attrStrOps$subexpression$1$string$2"]},{name:"attrStrOps$subexpression$1$string$3",symbols:[{literal:"*"},{literal:"="}],postprocess:e=>e.join("")},{name:"attrStrOps$subexpression$1",symbols:["attrStrOps$subexpression$1$string$3"]},{name:"attrStrOps",symbols:["attrStrOps$subexpression$1"],postprocess:e=>e[0].join("")},{name:"attrStrOps",symbols:["attrEqOps"],postprocess:f},{name:"attrName$ebnf$1",symbols:[]},{name:"attrName$ebnf$1$subexpression$1$subexpression$1",symbols:["number"]},{name:"attrName$ebnf$1$subexpression$1$subexpression$1",symbols:["identifier"]},{name:"attrName$ebnf$1$subexpression$1",symbols:[{literal:"."},"attrName$ebnf$1$subexpression$1$subexpression$1"]},{name:"attrName$ebnf$1",symbols:["attrName$ebnf$1","attrName$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"attrName",symbols:["identifier","attrName$ebnf$1"],postprocess:e=>{var s;return[e[0],...((s=e[1])!=null?s:[]).map(([r,t])=>t[0])]}},{name:"attrValue$subexpression$1$subexpression$1",symbols:["attrName","_","attrEqOps","_","regex"]},{name:"attrValue$subexpression$1",symbols:["attrValue$subexpression$1$subexpression$1"]},{name:"attrValue$subexpression$1$subexpression$2",symbols:["attrName","_","attrNumOps","_","number"]},{name:"attrValue$subexpression$1",symbols:["attrValue$subexpression$1$subexpression$2"]},{name:"attrValue$subexpression$1$subexpression$3",symbols:["attrName","_","attrStrOps","_","string"]},{name:"attrValue$subexpression$1",symbols:["attrValue$subexpression$1$subexpression$3"]},{name:"attrValue",symbols:["attrValue$subexpression$1"],postprocess:([[[e,s,r,t,n]]],a,i)=>e===null||r===null||n===null?i:{type:"attribute",names:e,operator:r,right:n}},{name:"attrValue",symbols:["attrName"],postprocess:e=>({type:"attribute",names:e[0]})},{name:"string$ebnf$1",symbols:[]},{name:"string$ebnf$1",symbols:["string$ebnf$1",/[^"]/],postprocess:e=>e[0].concat([e[1]])},{name:"string",symbols:[{literal:'"'},"string$ebnf$1",{literal:'"'}],postprocess:e=>j(e[1].join(""))},{name:"string$ebnf$2",symbols:[]},{name:"string$ebnf$2",symbols:["string$ebnf$2",/[^']/],postprocess:e=>e[0].concat([e[1]])},{name:"string",symbols:[{literal:"'"},"string$ebnf$2",{literal:"'"}],postprocess:e=>j(e[1].join(""))},{name:"flags$ebnf$1",symbols:[/[imsu]/]},{name:"flags$ebnf$1",symbols:["flags$ebnf$1",/[imsu]/],postprocess:e=>e[0].concat([e[1]])},{name:"flags",symbols:["flags$ebnf$1"],postprocess:e=>e[0].join("")},{name:"regex$ebnf$1",symbols:[/[^/]/]},{name:"regex$ebnf$1",symbols:["regex$ebnf$1",/[^/]/],postprocess:e=>e[0].concat([e[1]])},{name:"regex$ebnf$2",symbols:["flags"],postprocess:f},{name:"regex$ebnf$2",symbols:[],postprocess:()=>null},{name:"regex",symbols:[{literal:"/"},"regex$ebnf$1",{literal:"/"},"regex$ebnf$2"],postprocess:e=>{var s;return new RegExp(e[1].join(""),(s=e[3])!=null?s:"")}},{name:"pseudoSelector$subexpression$1",symbols:["root"]},{name:"pseudoSelector$subexpression$1",symbols:["class"]},{name:"pseudoSelector$subexpression$1",symbols:["logicalSelector"]},{name:"pseudoSelector$subexpression$1",symbols:["firstChild"]},{name:"pseudoSelector$subexpression$1",symbols:["lastChild"]},{name:"pseudoSelector$subexpression$1",symbols:["nthChild"]},{name:"pseudoSelector$subexpression$1",symbols:["nthLastChild"]},{name:"pseudoSelector$subexpression$1",symbols:["onlyChild"]},{name:"pseudoSelector",symbols:[{literal:":"},"pseudoSelector$subexpression$1"],postprocess:e=>e[1][0]},{name:"root$string$1",symbols:[{literal:"r"},{literal:"o"},{literal:"o"},{literal:"t"}],postprocess:e=>e.join("")},{name:"root",symbols:["root$string$1"],postprocess:()=>({type:"root"})},{name:"class$subexpression$1$string$1",symbols:[{literal:"s"},{literal:"t"},{literal:"a"},{literal:"t"},{literal:"e"},{literal:"m"},{literal:"e"},{literal:"n"},{literal:"t"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$1"]},{name:"class$subexpression$1$string$2",symbols:[{literal:"e"},{literal:"x"},{literal:"p"},{literal:"r"},{literal:"e"},{literal:"s"},{literal:"s"},{literal:"i"},{literal:"o"},{literal:"n"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$2"]},{name:"class$subexpression$1$string$3",symbols:[{literal:"d"},{literal:"e"},{literal:"c"},{literal:"l"},{literal:"a"},{literal:"r"},{literal:"a"},{literal:"t"},{literal:"i"},{literal:"o"},{literal:"n"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$3"]},{name:"class$subexpression$1$string$4",symbols:[{literal:"f"},{literal:"u"},{literal:"n"},{literal:"c"},{literal:"t"},{literal:"i"},{literal:"o"},{literal:"n"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$4"]},{name:"class$subexpression$1$string$5",symbols:[{literal:"p"},{literal:"a"},{literal:"t"},{literal:"t"},{literal:"e"},{literal:"r"},{literal:"n"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$5"]},{name:"class$subexpression$1$string$6",symbols:[{literal:"s"},{literal:"c"},{literal:"o"},{literal:"p"},{literal:"e"}],postprocess:e=>e.join("")},{name:"class$subexpression$1",symbols:["class$subexpression$1$string$6"]},{name:"class",symbols:["class$subexpression$1"],postprocess:([[e]])=>({type:"class",name:e})},{name:"nthExpr$ebnf$1$subexpression$1",symbols:["integer"]},{name:"nthExpr$ebnf$1$subexpression$1",symbols:[{literal:"-"}]},{name:"nthExpr$ebnf$1$subexpression$1",symbols:[{literal:"+"}]},{name:"nthExpr$ebnf$1",symbols:["nthExpr$ebnf$1$subexpression$1"],postprocess:f},{name:"nthExpr$ebnf$1",symbols:[],postprocess:()=>null},{name:"nthExpr$ebnf$2$subexpression$1",symbols:["_",/[\+-]/,"_","integer"]},{name:"nthExpr$ebnf$2",symbols:["nthExpr$ebnf$2$subexpression$1"],postprocess:f},{name:"nthExpr$ebnf$2",symbols:[],postprocess:()=>null},{name:"nthExpr",symbols:["nthExpr$ebnf$1",{literal:"n"},"nthExpr$ebnf$2"],postprocess:e=>{let s=1;e[0]!==null&&(e[0][0]==="-"?s=-1:typeof e[0][0]=="number"&&(s=e[0][0]));let r=0;if(e[2]!==null){let t=e[2][1];r=e[2][3],t==="-"&&(r=-r)}return{type:"nthExpr",multiplier:s,offset:r}}},{name:"nthExpr$string$1",symbols:[{literal:"o"},{literal:"d"},{literal:"d"}],postprocess:e=>e.join("")},{name:"nthExpr",symbols:["nthExpr$string$1"],postprocess:e=>({type:"nthExpr",multiplier:2,offset:1})},{name:"nthExpr$string$2",symbols:[{literal:"e"},{literal:"v"},{literal:"e"},{literal:"n"}],postprocess:e=>e.join("")},{name:"nthExpr",symbols:["nthExpr$string$2"],postprocess:e=>({type:"nthExpr",multiplier:2,offset:0})},{name:"nthExpr",symbols:["integer"],postprocess:([e])=>({type:"nthExpr",multiplier:0,offset:e})},{name:"logicalSelector$subexpression$1$string$1",symbols:[{literal:"i"},{literal:"s"}],postprocess:e=>e.join("")},{name:"logicalSelector$subexpression$1",symbols:["logicalSelector$subexpression$1$string$1"]},{name:"logicalSelector$subexpression$1$string$2",symbols:[{literal:"m"},{literal:"a"},{literal:"t"},{literal:"c"},{literal:"h"},{literal:"e"},{literal:"s"}],postprocess:e=>e.join("")},{name:"logicalSelector$subexpression$1",symbols:["logicalSelector$subexpression$1$string$2"]},{name:"logicalSelector$subexpression$1$string$3",symbols:[{literal:"w"},{literal:"h"},{literal:"e"},{literal:"r"},{literal:"e"}],postprocess:e=>e.join("")},{name:"logicalSelector$subexpression$1",symbols:["logicalSelector$subexpression$1$string$3"]},{name:"logicalSelector",symbols:["logicalSelector$subexpression$1",{literal:"("},"_","selectors","_",{literal:")"}],postprocess:(e,s,r)=>e[3]===null?r:{type:"is",argument:e[3]}},{name:"relativeSelector$ebnf$1",symbols:["relativeCombinator"],postprocess:f},{name:"relativeSelector$ebnf$1",symbols:[],postprocess:()=>null},{name:"relativeSelector",symbols:["relativeSelector$ebnf$1","selector"],postprocess:([e,s],r,t)=>s===null?t:[e!=null?e:"descendant",s]},{name:"logicalSelector$string$1",symbols:[{literal:"h"},{literal:"a"},{literal:"s"}],postprocess:e=>e.join("")},{name:"logicalSelector$ebnf$1",symbols:[]},{name:"logicalSelector$ebnf$1$subexpression$1",symbols:["_",{literal:","},"_","relativeSelector"]},{name:"logicalSelector$ebnf$1",symbols:["logicalSelector$ebnf$1","logicalSelector$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"logicalSelector",symbols:["logicalSelector$string$1",{literal:"("},"_","relativeSelector","logicalSelector$ebnf$1","_",{literal:")"}],postprocess:e=>{const s=[];for(const[r,t]of[e[3],...e[4].map(n=>n[3])])s.push({combinator:r,selector:t});return{type:"has",list:s}}},{name:"logicalSelector$string$2",symbols:[{literal:"n"},{literal:"o"},{literal:"t"}],postprocess:e=>e.join("")},{name:"logicalSelector",symbols:["logicalSelector$string$2",{literal:"("},"_","selectors","_",{literal:")"}],postprocess:(e,s,r)=>e[3]===null?r:{type:"not",argument:e[3]}},{name:"firstChild$string$1",symbols:[{literal:"f"},{literal:"i"},{literal:"r"},{literal:"s"},{literal:"t"},{literal:"-"},{literal:"c"},{literal:"h"},{literal:"i"},{literal:"l"},{literal:"d"}],postprocess:e=>e.join("")},{name:"firstChild",symbols:["firstChild$string$1"],postprocess:()=>({type:"nth-child",index:1})},{name:"lastChild$string$1",symbols:[{literal:"l"},{literal:"a"},{literal:"s"},{literal:"t"},{literal:"-"},{literal:"c"},{literal:"h"},{literal:"i"},{literal:"l"},{literal:"d"}],postprocess:e=>e.join("")},{name:"lastChild",symbols:["lastChild$string$1"],postprocess:()=>({type:"nth-child",index:-1})},{name:"nthChild$string$1",symbols:[{literal:"n"},{literal:"t"},{literal:"h"},{literal:"-"},{literal:"c"},{literal:"h"},{literal:"i"},{literal:"l"},{literal:"d"},{literal:"("}],postprocess:e=>e.join("")},{name:"nthChild",symbols:["nthChild$string$1","nthExpr",{literal:")"}],postprocess:e=>({type:"nth-child",index:e[1]})},{name:"nthLastChild$string$1",symbols:[{literal:"n"},{literal:"t"},{literal:"h"},{literal:"-"},{literal:"l"},{literal:"a"},{literal:"s"},{literal:"t"},{literal:"-"},{literal:"c"},{literal:"h"},{literal:"i"},{literal:"l"},{literal:"d"},{literal:"("}],postprocess:e=>e.join("")},{name:"nthLastChild",symbols:["nthLastChild$string$1","nthExpr",{literal:")"}],postprocess:e=>({type:"nth-child",index:-e[1]})},{name:"onlyChild$string$1",symbols:[{literal:"o"},{literal:"n"},{literal:"l"},{literal:"y"},{literal:"-"},{literal:"c"},{literal:"h"},{literal:"i"},{literal:"l"},{literal:"d"}],postprocess:e=>e.join("")},{name:"onlyChild",symbols:["onlyChild$string$1"],postprocess:()=>({type:"only-child"})}],ParserStart:"start"};function L(e){const s=new v.exports.Parser(v.exports.Grammar.fromCompiled(D));try{s.feed(e)}catch(r){throw new Error(`Error at character ${r.offset}`)}if(s.results.length===0)throw new Error("Unexpected end of input");return s.results[0]}function $(e,s,r,t){switch(t||(t=e),s.type){case"wildcard":return!0;case"type":return e.type===s.name;case"list":return s.list.some(l=>$(e,l,r,t));case"compound":return s.list.every(l=>$(e,l,r,t));case"complex":switch(s.combinator){case"sibling":const l=e.getAllPrevSiblings();return l.length!==0&&$(e,s.right,r,t)&&l.some(y=>$(y,s.left,r,t));case"adjacent":const u=e.getPrevSibling();return u&&$(e,s.right,r,t)&&$(u,s.left,r,t);case"child":const m=e.parentPath;return m!==null&&$(e,s.right,r,t)&&$(m,s.left,r,t);case"descendant":const b=e.getAncestry().slice(1);return $(e,s.right,r,t)&&console.log(s,b),b.length!==0&&$(e,s.right,r,t)&&b.some(y=>$(y,s.left,r,t))}case"root":return e===t;case"class":switch(s.name){case"statement":return e.isStatement();case"expression":return e.isExpression();case"declaration":return e.isDeclaration();case"function":return e.isFunction();case"pattern":return e.isPattern();case"scope":return e.isScope()}case"only-child":return e.inList&&e.container.length===1;case"not":return!$(e,s.argument,r);case"is":return $(e,s.argument,r);case"has":return s.list.some(l=>{switch(l.combinator){case"sibling":const u=e.getAllNextSiblings();return u.length!==0&&u.some(y=>$(y,l.selector,r,t));case"adjacent":const m=e.getNextSibling();return m&&$(m,l.selector,r,t);case"child":case"descendant":let b=!1;return e.traverse({enter(y){l.combinator==="child"&&y.skip(),$(y,l.selector,r,t)&&(b=!0,y.stop())}}),b}});case"ancestry":if(!$(e,s.subject,r,t))return!1;const n=e.getAncestry();let a=s.path.length-1;for(let l=0;l<n.length;l++){const u=n[l];let{key:m,specifier:b}=s.path[a];if(u.key!==m||b&&!$(u,b,r,t))return!1;if(--a<0)return!0;if(typeof m=="number"){if(s.path[a].specifier||!u.inList||u.listKey!==s.path[a].key)return!1;if(--a<0)return!0}}return!0;case"nth-child":if(!e.inList)return!1;const i=e.key,c=s.index;return c.multiplier>0?(i-c.offset)%c.multiplier===0:c.multiplier<0?(i+c.offset)%c.multiplier===0:c.offset===i;case"attribute":let o=e.node;for(const l of s.names){if(!(l in o))return!1;o=o[l]}if(!s.operator)return!!o;const p=s.right;if(typeof p=="object"){if(typeof o!="string")return!1;const l=p.test(o);switch(s.operator){case"=":return l;case"!=":return!l;default:throw new Error(`unexpected binary operator ${s.operator}`)}}if(typeof o!=typeof p)return!1;switch(s.operator){case"=":return o===p;case"!=":return o!==p;case">":return o>p;case"<":return o<p;case">=":return o>=p;case"<=":return o<=p;case"^=":return typeof o!="string"?!1:o.startsWith(p);case"$=":return typeof o!="string"?!1:o.endsWith(p);case"*=":return typeof o!="string"?!1:o.includes(p)}}}function M(e,s,r,t,n,a){const i={};t?("scope"in t&&(i.scope=t.scope),"noScope"in t&&(i.noScope=t.noScope),"denylist"in t&&(i.denylist=t.denylist)):t={},"parentPath"in e?e.traverse({enter(c){$(c,s,t!=null?t:{},e)&&r(c)}}):z.default(e,{...i,enter(c){c.skip(),c.traverse({enter(o){$(o,s,t!=null?t:{},c)&&r(o)}})}})}function R(e,s,r,t,n){typeof s=="string"&&(s=L(s));const a=[];return M(e,s,i=>a.push(i),r),a}function h(e){const s=document.createElement("span");return s.innerText=e,s.classList.add("terminal"),s}function x(e){const s=document.createElement("p");return s.appendChild(h(e)),s}function C(e){const s=h(JSON.stringify(e));return s.classList.add(typeof e),s}function N(e){const s=document.createElement("p");return s.appendChild(C(e)),s}function k(e){const s=document.createElement("span");return s.innerText=e,s.classList.add("type"),s}function d(e,s){if(s.classList.add("property"),s.dataset.key=e,s.tagName==="DETAILS"){const r=s.querySelector("summary");r.dataset.key=e}return s}function g(e){if(e.type==="wildcard"||e.type==="type"||e.type==="class"||e.type==="root"||e.type==="only-child")switch(e.type){case"wildcard":return x("*");case"type":return x(e.name);case"class":return x(":"+e.name);case"root":return x(":root");case"only-child":return x(":only-child")}const s=document.createElement("details"),r=document.createElement("summary");switch(r.appendChild(k(e.type)),s.appendChild(r),e.type){case"compound":case"list":for(const l of e.list)s.appendChild(g(l));break;case"is":case"not":s.appendChild(g(e.argument));break;case"has":for(const{combinator:l,selector:u}of e.list){const m=g(u);m.tagName==="details"?m.querySelector("summary").appendChild(document.createTextNode(" "+l)):m.innerText+=" "+l,s.appendChild(m)}break;case"complex":s.appendChild(d("left",g(e.left))),s.appendChild(d("combinator",h(e.combinator))),s.appendChild(d("right",g(e.right)));break;case"nth-child":const{index:t}=e,n=document.createElement("details"),a=document.createElement("summary");a.innerText="index",n.appendChild(a),n.appendChild(d("multiplier",h(t.multiplier.toString()))),n.appendChild(d("offset",h(t.offset.toString()))),s.appendChild(n);break;case"ancestry":s.appendChild(d("subject",g(e.subject)));const i=document.createElement("details"),c=document.createElement("summary");c.innerText="path",i.appendChild(c);for(const{key:l,specifier:u}of e.path){if(u===null){i.appendChild(N(l));continue}const m=g(u),b=m.tagName==="DETAILS"?m.querySelector("summary"):m;console.log(m.innerHTML),b.appendChild(document.createTextNode(" at ")),b.appendChild(C(l)),i.appendChild(m)}s.appendChild(i);break;case"attribute":const o=document.createElement("details"),p=document.createElement("summary");p.innerText="names",o.appendChild(p);for(const l of e.names)o.appendChild(N(l));if(s.appendChild(o),e.operator){s.appendChild(d("operator",h(e.operator)));const l=e.right;s.appendChild(d("right",typeof l=="object"?h(l.toString()):C(l)))}break}return s}function _(e){if(e.node===null)return h("null");const s=document.createElement("details"),r=document.createElement("summary");r.appendChild(k(e.type)),s.appendChild(r);for(const[t,n]of Object.entries(e.node))if(t!=="type"&&t!=="start"&&t!=="end"&&t!=="loc")if(I.VISITOR_KEYS[e.type].includes(t)){const a=e.get(t);if(Array.isArray(a)){const i=document.createElement("details"),c=document.createElement("summary");c.innerText=t,i.appendChild(c);for(const o of a)i.appendChild(_(o));s.appendChild(i)}else s.appendChild(d(t,_(a)))}else s.appendChild(d(t,C(n)));if(e.node.loc){let t=function({line:i,column:c}){const o=document.createElement("span");o.classList.add("terminal");const p=document.createElement("span");p.classList.add("terminal","number"),p.innerText=i.toString();const l=document.createElement("span");return l.classList.add("terminal","number"),l.innerText=c.toString(),o.replaceChildren(p,document.createTextNode(":"),l),o};const{start:n,end:a}=e.node.loc;s.appendChild(d("start",t(n))),s.appendChild(d("end",t(a)))}return s}O.register({id:"babelQuery"});O.setMonarchTokensProvider("babelQuery",{ws:`[ 	
\r\f]*`,tokenizer:{root:[["[\\*]","tag"],["[>\\+,\\.]","delimiter"],{include:"@string"},{include:"@number"}],number:[["-?(\\d*\\.)?\\d+",{token:"number"}]],string:[['~?"',{token:"string",next:"@stringenddoublequote"}],["~?'",{token:"string",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string",next:"@pop"}],[/[^\\"]+/,"string"],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string",next:"@pop"}],[/[^\\']+/,"string"],[".","string"]]}});const q=document.getElementById("query-editor"),E=w.create(q,{value:":function[id.name='foo'] IfStatement ExpressionStatement.consequent:is(BlockStatement).body.1 CallExpression:has(> Identifier[name='baz'])",language:"babelQuery",theme:"vs-dark",wordWrap:"off",lineNumbers:"off",lineNumbersMinChars:0,overviewRulerLanes:0,overviewRulerBorder:!1,renderLineHighlight:"none",lineDecorationsWidth:0,hideCursorInOverviewRuler:!0,glyphMargin:!1,folding:!1,scrollBeyondLastColumn:0,scrollbar:{horizontal:"hidden",vertical:"hidden"},find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"never"},minimap:{enabled:!1},automaticLayout:!0}),K=document.getElementById("javascript-editor"),S=w.create(K,{value:`function foo() {
    bar = baz();
    xyzzy = baz();
    if (bar) {
        bar = baz();
        xyzzy = baz();
    }
}`,language:"javascript",theme:"vs-dark",automaticLayout:!0});window.addEventListener("resize",e=>{E.layout({width:q.clientWidth,height:20}),S.layout({})});const Q=document.querySelector("#selector-ast"),B=document.querySelector("#query-matches");function T(){const e=E.getModel().getLineContent(1),s=L(e);console.log(s);const r=g(s);Q.replaceChildren(r);const t=S.getModel().getLinesContent().join(`
`),n=A(t);let a;a=R(n,s),a&&B.replaceChildren(...a.map(i=>{const c=_(i),{loc:o}=i.node;if(o){let p=[];c.addEventListener("mouseover",l=>{const u=S.getModel(),{start:m,end:b}=o;p=u.deltaDecorations(p,[{range:new V(m.line,m.column+1,b.line,b.column+1),options:{inlineClassName:"highlighted"}}])}),c.addEventListener("mouseout",l=>{p=S.getModel().deltaDecorations(p,[])})}return c}))}T();E.addCommand(P.Enter,()=>{});E.getModel().onDidChangeContent(T);
